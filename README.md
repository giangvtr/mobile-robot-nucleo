# Mobile Robot with Nucleo (Cortex-M4)

This project uses an **STM32 Nucleo board (Cortex-M4)** to build a basic mobile robot platform. The project is developed in **Keil µVision v5** and organized for embedded C development using CMSIS libraries. The code is written in bare-metal without the help of code-generation tool like STM32CubeIDE.

---

## Project Overview
![Robot](robot.jpg "Robot Hardware")


### Goals:
- Control **DC motors via PWM** for directional movement. An **infrared remote control** is to allow wireless interaction with the robot
- Integrate an **ultrasonic distance sensor** (HC-SR04 or similar) to detect obstacles
- Additional module for real-time signal processing (DSP) chain through DAC/ADC peripherals


---

## Features Implemented

### Motor Control (in `moteur.c/.h`)
* Configured **PWM channels** on STM32 timers.
* Implemented basic robot **movement commands**:
  - Forward
  - Backward
  - Turn left / right
  - Stop

### Ultrasonic Sensor Integration (in `ultrasound.c/.h`)
* Configured GPIO pins for **TRIG** and **ECHO**.
* Measured distance using **input capture** or **timing logic**.
> ⚠️ Make sure to level-shift the ECHO signal if needed to protect GPIO pins.

### IR Remote Control (in `main.c/.h`)
* Added support for **infrared signal decoding** using **TIM5 interrupts**.
* Implemented **NEC protocol** decoding to capture 32-bit remote control codes.

### Digital Signal Processing
* Implemented a full real-time digital signal processing (DSP) chain through ADC and DAC peripherals
* Developed and tested interrupt-driven signal acquisition and output routines

---

## 🔌 Hardware Setup

| Component              | Description                          |
|------------------------|--------------------------------------|
| **Nucleo Board**       | STM32F4 series (Cortex-M4)           |
| **Motors**             | DC motors with H-bridge driver (e.g., L298N) |
| **Ultrasound Sensor**  | HC-SR04 (5V), interfaced via voltage divider |
| **Power Supply**       | 5V for logic, 9–12V for motors       |

---

## Development Environment
- **IDE**: Keil µVision 5
- **Language**: C (bare-metal)
- **Hardware debugger**: LogicPort

## Folder Structure
```plaintext
├── RTE/ # Run-Time Environment (auto-generated by Keil)
├── .gitignore                             # Git ignored files
├── EventRecorderStub.scvd                 # Keil event recording file
├── Keil_STM.ini                           # IDE configuration
├── TP_SMP.uvprojx                         # Keil project file
├── TP_SMP.uvoptx                          # Keil project options
├── SysClock.c/.h                          # System clock setup
├── SysTick.c/.h                           # SysTick timer configuration
├── gpio.c/.h                              # GPIO driver functions
├── moteur.c/.h                            # PWM motor control logic
├── main.c/.h                              # Main application
├── PinNames.h                             # Pin definitions
├── startup_stm32f446xx.s                  # Startup code for STM32F446
├── stm32_periph.h                         # Peripheral definitions
├── stm32f4xx_gpio_AF.h                    # Alternate function mapping for GPIO
├── ultrasound.c/.h                        # Interface with ultrasound sensor

```
---

## How to Run

1. Clone this repository:
   ```bash
   # With SSH
   git clone git@github.com:giangvtr/mobile-robot-nucleo.git

   # With HTTPS:
   git clone https://github.com/giangvtr/mobile-robot-nucleo.git
   # Then sign in with your user name and password
   ```
2. Open Keil µVision software
- Go to File > Open Project
- Choose `uvprojx` file type then choose `TP_SMP.uvprojx`

3. Setup debugging environment (directly on hardware)
4. Power the card
5. Build, debug and run the project

---


